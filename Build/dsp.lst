ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"dsp.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/Application/State_Estimator/Dsp/dsp.c"
  20              		.section	.text.Reducer_apply,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	Reducer_apply:
  27              	.LVL0:
  28              	.LFB170:
   1:Core/Src/Application/State_Estimator/Dsp/dsp.c **** #include "dsp.h"
   2:Core/Src/Application/State_Estimator/Dsp/dsp.c **** extern float32_t pendlm_butterworth_coeffs[PENDULM_FILTER_STAGES_NUM * COEFFS_NUM];
   3:Core/Src/Application/State_Estimator/Dsp/dsp.c **** extern float32_t motor_butterworth_coeffs[MOTOR_FILTER_STAGES_NUM * COEFFS_NUM];
   4:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
   5:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void Differentiator_apply(Differentiator * const self, float32_t * input, float32_t * output
   6:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
   7:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t diff_x;
   8:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t filtered_diff_x;
   9:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t x = *input;
  10:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  11:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Estimate first derivative*/
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     diff_x = self->coeffs[0] * x + self->coeffs[1] * self->state[1] + self->coeffs[2] * self->state
  13:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  14:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Store the updated state variables back into the state array*/
  15:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[2] = self->state[1]; self->state[1] = x;
  16:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     
  17:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Filter estimated first derivative*/
  18:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filter.numStages = 1;
  19:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     arm_biquad_cascade_df2T_f32(&self->filter, &diff_x, &filtered_diff_x, 1);
  20:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  21:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Return output value*/
  22:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     *output = filtered_diff_x;
  23:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
  24:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  25:Core/Src/Application/State_Estimator/Dsp/dsp.c **** void Differentiator_new(Differentiator * const self, float32_t sample_time, uint8_t num_states, flo
  26:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
  27:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign member functions*/
  28:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->apply = &Differentiator_apply;
  29:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  30:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize data members*/
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 2


  31:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->sample_time = sample_time;
  32:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[0] = 3.0F / (2.0F * self->sample_time);
  33:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[1] = -4.0F / (2.0F * self->sample_time);
  34:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[2] = 1.0F / (2.0F * self->sample_time);
  35:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[0] = 0.0F; 
  36:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[1] = 0.0F;
  37:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  38:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize filter*/
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filter_state = ( float32_t * ) pvPortMalloc( (2U * (uint32_t) num_states) * sizeof(float3
  40:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  41:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     arm_biquad_cascade_df2T_init_f32(&self->filter, num_states, filter_coeffs, self->filter_state);
  42:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
  43:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  44:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void Reducer_apply(struct Reducer * const self, float32_t * raw_angle, float32_t * clean_ang
  45:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
  29              		.loc 1 45 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  46:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t estimated_angle;
  34              		.loc 1 46 5 view .LVU1
  47:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t reading_angle = *raw_angle;
  35              		.loc 1 47 5 view .LVU2
  36              		.loc 1 47 15 is_stmt 0 view .LVU3
  37 0000 91ED007A 		vldr.32	s14, [r1]
  38              	.LVL1:
  48:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  49:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Estimate current angle*/
  50:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     estimated_angle = self->reduced_angle[1] + 1.5F * self->reduced_angle[1] - 2.0F * self->reduced
  39              		.loc 1 50 5 is_stmt 1 view .LVU4
  40              		.loc 1 50 42 is_stmt 0 view .LVU5
  41 0004 D0ED027A 		vldr.32	s15, [r0, #8]
  42              		.loc 1 50 53 view .LVU6
  43 0008 F7EE086A 		vmov.f32	s13, #1.5e+0
  44 000c 67EEA66A 		vmul.f32	s13, s15, s13
  45              		.loc 1 50 46 view .LVU7
  46 0010 77EEA67A 		vadd.f32	s15, s15, s13
  47              		.loc 1 50 106 view .LVU8
  48 0014 D0ED036A 		vldr.32	s13, [r0, #12]
  49              		.loc 1 50 85 view .LVU9
  50 0018 76EEA66A 		vadd.f32	s13, s13, s13
  51              		.loc 1 50 78 view .LVU10
  52 001c 77EEE67A 		vsub.f32	s15, s15, s13
  53              		.loc 1 50 138 view .LVU11
  54 0020 D0ED046A 		vldr.32	s13, [r0, #16]
  55              		.loc 1 50 117 view .LVU12
  56 0024 B6EE006A 		vmov.f32	s12, #5.0e-1
  57 0028 66EE866A 		vmul.f32	s13, s13, s12
  58              		.loc 1 50 21 view .LVU13
  59 002c 77EEA67A 		vadd.f32	s15, s15, s13
  60              	.LVL2:
  51:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  52:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Detect arbnormal angle data*/
  53:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[0] = fabsf(estimated_angle - reading_angle) > self->threshold ? estimated_a
  61              		.loc 1 53 5 is_stmt 1 view .LVU14
  62              		.loc 1 53 52 is_stmt 0 view .LVU15
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 3


  63 0030 77EEC76A 		vsub.f32	s13, s15, s14
  64              		.loc 1 53 30 view .LVU16
  65 0034 F0EEE66A 		vabs.f32	s13, s13
  66              		.loc 1 53 75 view .LVU17
  67 0038 90ED006A 		vldr.32	s12, [r0]
  68              		.loc 1 53 105 view .LVU18
  69 003c F4EEC66A 		vcmpe.f32	s13, s12
  70 0040 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  71 0044 01DD     		ble	.L2
  72              		.loc 1 53 105 discriminator 1 view .LVU19
  73 0046 B0EE677A 		vmov.f32	s14, s15
  74              	.LVL3:
  75              	.L2:
  76              		.loc 1 53 28 discriminator 4 view .LVU20
  77 004a 80ED017A 		vstr.32	s14, [r0, #4]
  78              	.LVL4:
  54:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     *clean_angle = self->reduced_angle[0];
  79              		.loc 1 54 5 is_stmt 1 view .LVU21
  80              		.loc 1 54 18 is_stmt 0 view .LVU22
  81 004e 82ED007A 		vstr.32	s14, [r2]
  55:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  56:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Store the updated state variables back into the state array*/
  57:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[3] = self->reduced_angle[2];
  82              		.loc 1 57 5 is_stmt 1 view .LVU23
  83              		.loc 1 57 49 is_stmt 0 view .LVU24
  84 0052 C368     		ldr	r3, [r0, #12]	@ float
  85              		.loc 1 57 28 view .LVU25
  86 0054 0361     		str	r3, [r0, #16]	@ float
  58:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = self->reduced_angle[1];
  87              		.loc 1 58 5 is_stmt 1 view .LVU26
  88              		.loc 1 58 49 is_stmt 0 view .LVU27
  89 0056 8368     		ldr	r3, [r0, #8]	@ float
  90              		.loc 1 58 28 view .LVU28
  91 0058 C360     		str	r3, [r0, #12]	@ float
  59:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[1] = self->reduced_angle[0];
  92              		.loc 1 59 5 is_stmt 1 view .LVU29
  93              		.loc 1 59 28 is_stmt 0 view .LVU30
  94 005a 80ED027A 		vstr.32	s14, [r0, #8]
  60:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
  95              		.loc 1 60 1 view .LVU31
  96 005e 7047     		bx	lr
  97              		.cfi_endproc
  98              	.LFE170:
 100              		.section	.text.cvtAngle,"ax",%progbits
 101              		.align	1
 102              		.syntax unified
 103              		.thumb
 104              		.thumb_func
 106              	cvtAngle:
 107              	.LVL5:
 108              	.LFB172:
  61:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  62:Core/Src/Application/State_Estimator/Dsp/dsp.c **** void Reducer_new(struct Reducer * const self, float32_t threshold)
  63:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
  64:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign member functions*/
  65:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->apply = &Reducer_apply;
  66:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 4


  67:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize data members*/
  68:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->threshold = threshold;
  69:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[0] = 0.0F; self->reduced_angle[1] = 0.0F;
  70:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = 0.0F; self->reduced_angle[3] = 0.0F;
  71:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
  72:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  73:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void cvtAngle(struct Dsp * const self, Encoder const * const encoder_topic)
  74:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
 109              		.loc 1 74 1 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
 113              		@ link register save eliminated.
  75:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Estimate angle from reading encoder counter*/
  76:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->raw_motor_angle = self->motor_resol * encoder_topic->motor_counter;
 114              		.loc 1 76 5 view .LVU33
 115              		.loc 1 76 33 is_stmt 0 view .LVU34
 116 0000 90ED027A 		vldr.32	s14, [r0, #8]
 117              		.loc 1 76 47 view .LVU35
 118 0004 D1ED017A 		vldr.32	s15, [r1, #4]	@ int
 119 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
 120 000c 67EE877A 		vmul.f32	s15, s15, s14
 121              		.loc 1 76 27 view .LVU36
 122 0010 C0ED007A 		vstr.32	s15, [r0]
  77:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->raw_pendlm_angle = self->pendlm_resol * encoder_topic->pendlm_counter;
 123              		.loc 1 77 5 is_stmt 1 view .LVU37
 124              		.loc 1 77 34 is_stmt 0 view .LVU38
 125 0014 90ED037A 		vldr.32	s14, [r0, #12]
 126              		.loc 1 77 64 view .LVU39
 127 0018 B1F90030 		ldrsh	r3, [r1]
 128 001c 07EE903A 		vmov	s15, r3	@ int
 129              		.loc 1 77 49 view .LVU40
 130 0020 F8EEE77A 		vcvt.f32.s32	s15, s15
 131 0024 67EE877A 		vmul.f32	s15, s15, s14
 132              		.loc 1 77 28 view .LVU41
 133 0028 C0ED017A 		vstr.32	s15, [r0, #4]
  78:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 134              		.loc 1 78 1 view .LVU42
 135 002c 7047     		bx	lr
 136              		.cfi_endproc
 137              	.LFE172:
 139              		.section	.text.filter,"ax",%progbits
 140              		.align	1
 141              		.syntax unified
 142              		.thumb
 143              		.thumb_func
 145              	filter:
 146              	.LVL6:
 147              	.LFB173:
  79:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  80:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void filter(struct Dsp * const self)
  81:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
 148              		.loc 1 81 1 is_stmt 1 view -0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152              		.loc 1 81 1 is_stmt 0 view .LVU44
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 5


 153 0000 10B5     		push	{r4, lr}
 154              	.LCFI0:
 155              		.cfi_def_cfa_offset 8
 156              		.cfi_offset 4, -8
 157              		.cfi_offset 14, -4
 158 0002 0446     		mov	r4, r0
  82:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Reduce abnormal reading angle*/
  83:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     // self->motor_reducer->apply(self->motor_reducer, &self->raw_motor_angle, &self->motor_angle);
  84:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     // self->pendlm_reducer->apply(self->pendlm_reducer, &self->raw_pendlm_angle, &self->pendlm_ang
  85:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     // self->filtered_motor_angle = self->motor_angle;
  86:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filtered_motor_angle = self->raw_motor_angle;
 159              		.loc 1 86 5 is_stmt 1 view .LVU45
 160              		.loc 1 86 38 is_stmt 0 view .LVU46
 161 0004 0368     		ldr	r3, [r0]	@ float
 162              		.loc 1 86 32 view .LVU47
 163 0006 0362     		str	r3, [r0, #32]	@ float
  87:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filtered_pendlm_angle = self->raw_pendlm_angle;
 164              		.loc 1 87 5 is_stmt 1 view .LVU48
 165              		.loc 1 87 39 is_stmt 0 view .LVU49
 166 0008 4368     		ldr	r3, [r0, #4]	@ float
 167              		.loc 1 87 33 view .LVU50
 168 000a 4362     		str	r3, [r0, #36]	@ float
  88:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  89:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Estimate first derivative and filter*/
  90:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->motor_differentiator->apply(self->motor_differentiator, &self->filtered_motor_angle, &sel
 169              		.loc 1 90 5 is_stmt 1 view .LVU51
 170              		.loc 1 90 9 is_stmt 0 view .LVU52
 171 000c C06D     		ldr	r0, [r0, #92]
 172              	.LVL7:
 173              		.loc 1 90 31 view .LVU53
 174 000e 836A     		ldr	r3, [r0, #40]
 175              		.loc 1 90 5 view .LVU54
 176 0010 04F12802 		add	r2, r4, #40
 177 0014 04F12001 		add	r1, r4, #32
 178 0018 9847     		blx	r3
 179              	.LVL8:
  91:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->pendlm_differentiator->apply(self->pendlm_differentiator, &self->filtered_pendlm_angle, &
 180              		.loc 1 91 5 is_stmt 1 view .LVU55
 181              		.loc 1 91 9 is_stmt 0 view .LVU56
 182 001a 206E     		ldr	r0, [r4, #96]
 183              		.loc 1 91 32 view .LVU57
 184 001c 836A     		ldr	r3, [r0, #40]
 185              		.loc 1 91 5 view .LVU58
 186 001e 04F12C02 		add	r2, r4, #44
 187 0022 04F12401 		add	r1, r4, #36
 188 0026 9847     		blx	r3
 189              	.LVL9:
  92:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 190              		.loc 1 92 1 view .LVU59
 191 0028 10BD     		pop	{r4, pc}
 192              		.loc 1 92 1 view .LVU60
 193              		.cfi_endproc
 194              	.LFE173:
 196              		.section	.text.estimate,"ax",%progbits
 197              		.align	1
 198              		.syntax unified
 199              		.thumb
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 6


 200              		.thumb_func
 202              	estimate:
 203              	.LVL10:
 204              	.LFB174:
  93:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
  94:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void estimate(struct Dsp * const self)
  95:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
 205              		.loc 1 95 1 is_stmt 1 view -0
 206              		.cfi_startproc
 207              		@ args = 0, pretend = 0, frame = 0
 208              		@ frame_needed = 0, uses_anonymous_args = 0
 209              		@ link register save eliminated.
  96:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Output into interfaced variables estimated_motor_data*/
  97:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_motor_data.angle = self->filtered_motor_angle;
 210              		.loc 1 97 5 view .LVU62
 211              		.loc 1 97 44 is_stmt 0 view .LVU63
 212 0000 90ED087A 		vldr.32	s14, [r0, #32]
 213              		.loc 1 97 38 view .LVU64
 214 0004 80ED0C7A 		vstr.32	s14, [r0, #48]
  98:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_motor_data.vel = self->filtered_motor_vel;
 215              		.loc 1 98 5 is_stmt 1 view .LVU65
 216              		.loc 1 98 42 is_stmt 0 view .LVU66
 217 0008 D0ED0A7A 		vldr.32	s15, [r0, #40]
 218              		.loc 1 98 36 view .LVU67
 219 000c C0ED0D7A 		vstr.32	s15, [r0, #52]
  99:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_pendlm_data.angle = self->filtered_pendlm_angle;
 220              		.loc 1 99 5 is_stmt 1 view .LVU68
 221              		.loc 1 99 45 is_stmt 0 view .LVU69
 222 0010 436A     		ldr	r3, [r0, #36]	@ float
 223              		.loc 1 99 39 view .LVU70
 224 0012 C363     		str	r3, [r0, #60]	@ float
 100:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_pendlm_data.vel = self->filtered_pendlm_vel;
 225              		.loc 1 100 5 is_stmt 1 view .LVU71
 226              		.loc 1 100 43 is_stmt 0 view .LVU72
 227 0014 C36A     		ldr	r3, [r0, #44]	@ float
 228              		.loc 1 100 37 view .LVU73
 229 0016 0364     		str	r3, [r0, #64]	@ float
 101:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 102:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Estimate x, v of cart
 103:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     * Because of utilizization of StateData structure, we need to note that 
 104:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     * estimated_cart_data.angle = x 
 105:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     * estimated_cart_data.vel = v
 106:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     */
 107:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_cart_data.angle = self->filtered_motor_angle * self->gear_ratio;
 230              		.loc 1 107 5 is_stmt 1 view .LVU74
 231              		.loc 1 107 72 is_stmt 0 view .LVU75
 232 0018 D0ED046A 		vldr.32	s13, [r0, #16]
 233              		.loc 1 107 66 view .LVU76
 234 001c 27EE267A 		vmul.f32	s14, s14, s13
 235              		.loc 1 107 37 view .LVU77
 236 0020 80ED127A 		vstr.32	s14, [r0, #72]
 108:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_cart_data.vel = self->filtered_motor_vel * self->gear_ratio;
 237              		.loc 1 108 5 is_stmt 1 view .LVU78
 238              		.loc 1 108 62 is_stmt 0 view .LVU79
 239 0024 67EEA67A 		vmul.f32	s15, s15, s13
 240              		.loc 1 108 35 view .LVU80
 241 0028 C0ED137A 		vstr.32	s15, [r0, #76]
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 7


 109:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 242              		.loc 1 109 1 view .LVU81
 243 002c 7047     		bx	lr
 244              		.cfi_endproc
 245              	.LFE174:
 247              		.section	.text.processNewData,"ax",%progbits
 248              		.align	1
 249              		.syntax unified
 250              		.thumb
 251              		.thumb_func
 253              	processNewData:
 254              	.LVL11:
 255              	.LFB175:
 110:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 111:Core/Src/Application/State_Estimator/Dsp/dsp.c **** static void processNewData(struct Dsp * const self, Encoder const * const encoder_topic, State * co
 112:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
 256              		.loc 1 112 1 is_stmt 1 view -0
 257              		.cfi_startproc
 258              		@ args = 0, pretend = 0, frame = 0
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260              		.loc 1 112 1 is_stmt 0 view .LVU83
 261 0000 38B5     		push	{r3, r4, r5, lr}
 262              	.LCFI1:
 263              		.cfi_def_cfa_offset 16
 264              		.cfi_offset 3, -16
 265              		.cfi_offset 4, -12
 266              		.cfi_offset 5, -8
 267              		.cfi_offset 14, -4
 268 0002 0446     		mov	r4, r0
 269 0004 1546     		mov	r5, r2
 113:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Output to self->motor_angle, pendlm_angle*/
 114:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->cvtAngle(self, encoder_topic);
 270              		.loc 1 114 5 is_stmt 1 view .LVU84
 271              		.loc 1 114 9 is_stmt 0 view .LVU85
 272 0006 836E     		ldr	r3, [r0, #104]
 273              		.loc 1 114 5 view .LVU86
 274 0008 9847     		blx	r3
 275              	.LVL12:
 115:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 116:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Output to self->filtered_motor_angle, self->filtered_pendlm_angle*/
 117:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filter(self);
 276              		.loc 1 117 5 is_stmt 1 view .LVU87
 277              		.loc 1 117 9 is_stmt 0 view .LVU88
 278 000a E36E     		ldr	r3, [r4, #108]
 279              		.loc 1 117 5 view .LVU89
 280 000c 2046     		mov	r0, r4
 281 000e 9847     		blx	r3
 282              	.LVL13:
 118:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 119:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Output to self->estimated_motor_data, self->estimated_pendlm_data*/
 120:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimate(self);
 283              		.loc 1 120 5 is_stmt 1 view .LVU90
 284              		.loc 1 120 9 is_stmt 0 view .LVU91
 285 0010 236F     		ldr	r3, [r4, #112]
 286              		.loc 1 120 5 view .LVU92
 287 0012 2046     		mov	r0, r4
 288 0014 9847     		blx	r3
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 8


 289              	.LVL14:
 121:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 122:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Copy estimated data into state_topic*/
 123:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     state_topic->motor = self->estimated_motor_data;
 290              		.loc 1 123 5 is_stmt 1 view .LVU93
 291              		.loc 1 123 24 is_stmt 0 view .LVU94
 292 0016 04F13003 		add	r3, r4, #48
 293 001a 93E80700 		ldm	r3, {r0, r1, r2}
 294 001e 85E80700 		stm	r5, {r0, r1, r2}
 124:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     state_topic->pendlm = self->estimated_pendlm_data;
 295              		.loc 1 124 5 is_stmt 1 view .LVU95
 296              		.loc 1 124 25 is_stmt 0 view .LVU96
 297 0022 05F10C03 		add	r3, r5, #12
 298 0026 04F13C02 		add	r2, r4, #60
 299 002a 07CA     		ldm	r2, {r0, r1, r2}
 300 002c 83E80700 		stm	r3, {r0, r1, r2}
 125:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     state_topic->cart = self->estimated_cart_data;
 301              		.loc 1 125 5 is_stmt 1 view .LVU97
 302              		.loc 1 125 23 is_stmt 0 view .LVU98
 303 0030 1835     		adds	r5, r5, #24
 304              	.LVL15:
 305              		.loc 1 125 23 view .LVU99
 306 0032 4834     		adds	r4, r4, #72
 307              	.LVL16:
 308              		.loc 1 125 23 view .LVU100
 309 0034 94E80700 		ldm	r4, {r0, r1, r2}
 310 0038 85E80700 		stm	r5, {r0, r1, r2}
 126:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 311              		.loc 1 126 1 view .LVU101
 312 003c 38BD     		pop	{r3, r4, r5, pc}
 313              		.loc 1 126 1 view .LVU102
 314              		.cfi_endproc
 315              	.LFE175:
 317              		.section	.text.Differentiator_apply,"ax",%progbits
 318              		.align	1
 319              		.syntax unified
 320              		.thumb
 321              		.thumb_func
 323              	Differentiator_apply:
 324              	.LVL17:
 325              	.LFB168:
   6:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t diff_x;
 326              		.loc 1 6 1 is_stmt 1 view -0
 327              		.cfi_startproc
 328              		@ args = 0, pretend = 0, frame = 8
 329              		@ frame_needed = 0, uses_anonymous_args = 0
   6:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t diff_x;
 330              		.loc 1 6 1 is_stmt 0 view .LVU104
 331 0000 10B5     		push	{r4, lr}
 332              	.LCFI2:
 333              		.cfi_def_cfa_offset 8
 334              		.cfi_offset 4, -8
 335              		.cfi_offset 14, -4
 336 0002 82B0     		sub	sp, sp, #8
 337              	.LCFI3:
 338              		.cfi_def_cfa_offset 16
 339 0004 1446     		mov	r4, r2
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 9


   7:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t filtered_diff_x;
 340              		.loc 1 7 5 is_stmt 1 view .LVU105
   8:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     float32_t x = *input;
 341              		.loc 1 8 5 view .LVU106
   9:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 342              		.loc 1 9 5 view .LVU107
   9:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 343              		.loc 1 9 15 is_stmt 0 view .LVU108
 344 0006 D1ED006A 		vldr.32	s13, [r1]
 345              	.LVL18:
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 346              		.loc 1 12 5 is_stmt 1 view .LVU109
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 347              		.loc 1 12 26 is_stmt 0 view .LVU110
 348 000a D0ED007A 		vldr.32	s15, [r0]
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 349              		.loc 1 12 30 view .LVU111
 350 000e 67EEA67A 		vmul.f32	s15, s15, s13
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 351              		.loc 1 12 48 view .LVU112
 352 0012 90ED017A 		vldr.32	s14, [r0, #4]
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 353              		.loc 1 12 65 view .LVU113
 354 0016 90ED056A 		vldr.32	s12, [r0, #20]
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 355              		.loc 1 12 52 view .LVU114
 356 001a 27EE067A 		vmul.f32	s14, s14, s12
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 357              		.loc 1 12 34 view .LVU115
 358 001e 77EE877A 		vadd.f32	s15, s15, s14
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 359              		.loc 1 12 83 view .LVU116
 360 0022 90ED027A 		vldr.32	s14, [r0, #8]
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 361              		.loc 1 12 100 view .LVU117
 362 0026 D0ED065A 		vldr.32	s11, [r0, #24]
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 363              		.loc 1 12 87 view .LVU118
 364 002a 27EE257A 		vmul.f32	s14, s14, s11
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 365              		.loc 1 12 69 view .LVU119
 366 002e 77EE877A 		vadd.f32	s15, s15, s14
  12:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 367              		.loc 1 12 12 view .LVU120
 368 0032 CDED017A 		vstr.32	s15, [sp, #4]
  15:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     
 369              		.loc 1 15 5 is_stmt 1 view .LVU121
  15:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     
 370              		.loc 1 15 20 is_stmt 0 view .LVU122
 371 0036 80ED066A 		vstr.32	s12, [r0, #24]
  15:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     
 372              		.loc 1 15 38 is_stmt 1 view .LVU123
  15:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     
 373              		.loc 1 15 53 is_stmt 0 view .LVU124
 374 003a C0ED056A 		vstr.32	s13, [r0, #20]
  18:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     arm_biquad_cascade_df2T_f32(&self->filter, &diff_x, &filtered_diff_x, 1);
 375              		.loc 1 18 5 is_stmt 1 view .LVU125
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 10


  18:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     arm_biquad_cascade_df2T_f32(&self->filter, &diff_x, &filtered_diff_x, 1);
 376              		.loc 1 18 28 is_stmt 0 view .LVU126
 377 003e 0123     		movs	r3, #1
 378 0040 00F8183F 		strb	r3, [r0, #24]!
 379              	.LVL19:
  19:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 380              		.loc 1 19 5 is_stmt 1 view .LVU127
 381 0044 6A46     		mov	r2, sp
 382              	.LVL20:
  19:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 383              		.loc 1 19 5 is_stmt 0 view .LVU128
 384 0046 01A9     		add	r1, sp, #4
 385              	.LVL21:
  19:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 386              		.loc 1 19 5 view .LVU129
 387 0048 FFF7FEFF 		bl	arm_biquad_cascade_df2T_f32
 388              	.LVL22:
  22:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 389              		.loc 1 22 5 is_stmt 1 view .LVU130
  22:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 390              		.loc 1 22 13 is_stmt 0 view .LVU131
 391 004c 009B     		ldr	r3, [sp]	@ float
 392 004e 2360     		str	r3, [r4]	@ float
  23:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 393              		.loc 1 23 1 view .LVU132
 394 0050 02B0     		add	sp, sp, #8
 395              	.LCFI4:
 396              		.cfi_def_cfa_offset 8
 397              		@ sp needed
 398 0052 10BD     		pop	{r4, pc}
  23:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 399              		.loc 1 23 1 view .LVU133
 400              		.cfi_endproc
 401              	.LFE168:
 403              		.section	.text.Differentiator_new,"ax",%progbits
 404              		.align	1
 405              		.global	Differentiator_new
 406              		.syntax unified
 407              		.thumb
 408              		.thumb_func
 410              	Differentiator_new:
 411              	.LVL23:
 412              	.LFB169:
  26:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign member functions*/
 413              		.loc 1 26 1 is_stmt 1 view -0
 414              		.cfi_startproc
 415              		@ args = 0, pretend = 0, frame = 0
 416              		@ frame_needed = 0, uses_anonymous_args = 0
  26:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign member functions*/
 417              		.loc 1 26 1 is_stmt 0 view .LVU135
 418 0000 70B5     		push	{r4, r5, r6, lr}
 419              	.LCFI5:
 420              		.cfi_def_cfa_offset 16
 421              		.cfi_offset 4, -16
 422              		.cfi_offset 5, -12
 423              		.cfi_offset 6, -8
 424              		.cfi_offset 14, -4
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 11


 425 0002 0446     		mov	r4, r0
 426 0004 0D46     		mov	r5, r1
 427 0006 1646     		mov	r6, r2
  28:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 428              		.loc 1 28 5 is_stmt 1 view .LVU136
  28:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 429              		.loc 1 28 17 is_stmt 0 view .LVU137
 430 0008 134B     		ldr	r3, .L15
 431 000a 8362     		str	r3, [r0, #40]
  31:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[0] = 3.0F / (2.0F * self->sample_time);
 432              		.loc 1 31 5 is_stmt 1 view .LVU138
  31:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[0] = 3.0F / (2.0F * self->sample_time);
 433              		.loc 1 31 23 is_stmt 0 view .LVU139
 434 000c 80ED030A 		vstr.32	s0, [r0, #12]
  32:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[1] = -4.0F / (2.0F * self->sample_time);
 435              		.loc 1 32 5 is_stmt 1 view .LVU140
  32:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[1] = -4.0F / (2.0F * self->sample_time);
 436              		.loc 1 32 36 is_stmt 0 view .LVU141
 437 0010 30EE000A 		vadd.f32	s0, s0, s0
 438              	.LVL24:
  32:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[1] = -4.0F / (2.0F * self->sample_time);
 439              		.loc 1 32 28 view .LVU142
 440 0014 B0EE087A 		vmov.f32	s14, #3.0e+0
 441 0018 C7EE007A 		vdiv.f32	s15, s14, s0
  32:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[1] = -4.0F / (2.0F * self->sample_time);
 442              		.loc 1 32 21 view .LVU143
 443 001c C0ED007A 		vstr.32	s15, [r0]
  33:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[2] = 1.0F / (2.0F * self->sample_time);
 444              		.loc 1 33 5 is_stmt 1 view .LVU144
  33:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[2] = 1.0F / (2.0F * self->sample_time);
 445              		.loc 1 33 29 is_stmt 0 view .LVU145
 446 0020 B9EE007A 		vmov.f32	s14, #-4.0e+0
 447 0024 C7EE007A 		vdiv.f32	s15, s14, s0
  33:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->coeffs[2] = 1.0F / (2.0F * self->sample_time);
 448              		.loc 1 33 21 view .LVU146
 449 0028 C0ED017A 		vstr.32	s15, [r0, #4]
  34:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[0] = 0.0F; 
 450              		.loc 1 34 5 is_stmt 1 view .LVU147
  34:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[0] = 0.0F; 
 451              		.loc 1 34 28 is_stmt 0 view .LVU148
 452 002c B7EE007A 		vmov.f32	s14, #1.0e+0
 453 0030 C7EE007A 		vdiv.f32	s15, s14, s0
  34:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[0] = 0.0F; 
 454              		.loc 1 34 21 view .LVU149
 455 0034 C0ED027A 		vstr.32	s15, [r0, #8]
  35:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[1] = 0.0F;
 456              		.loc 1 35 5 is_stmt 1 view .LVU150
  35:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->state[1] = 0.0F;
 457              		.loc 1 35 20 is_stmt 0 view .LVU151
 458 0038 0023     		movs	r3, #0
 459 003a 0361     		str	r3, [r0, #16]	@ float
  36:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 460              		.loc 1 36 5 is_stmt 1 view .LVU152
  36:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 461              		.loc 1 36 20 is_stmt 0 view .LVU153
 462 003c 4361     		str	r3, [r0, #20]	@ float
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 12


 463              		.loc 1 39 5 is_stmt 1 view .LVU154
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 464              		.loc 1 39 42 is_stmt 0 view .LVU155
 465 003e C800     		lsls	r0, r1, #3
 466              	.LVL25:
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 467              		.loc 1 39 42 view .LVU156
 468 0040 FFF7FEFF 		bl	pvPortMalloc
 469              	.LVL26:
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 470              		.loc 1 39 42 view .LVU157
 471 0044 0346     		mov	r3, r0
  39:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 472              		.loc 1 39 24 discriminator 1 view .LVU158
 473 0046 6062     		str	r0, [r4, #36]
  41:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 474              		.loc 1 41 5 is_stmt 1 view .LVU159
 475 0048 3246     		mov	r2, r6
 476 004a 2946     		mov	r1, r5
 477 004c 04F11800 		add	r0, r4, #24
 478 0050 FFF7FEFF 		bl	arm_biquad_cascade_df2T_init_f32
 479              	.LVL27:
  42:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 480              		.loc 1 42 1 is_stmt 0 view .LVU160
 481 0054 70BD     		pop	{r4, r5, r6, pc}
 482              	.LVL28:
 483              	.L16:
  42:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 484              		.loc 1 42 1 view .LVU161
 485 0056 00BF     		.align	2
 486              	.L15:
 487 0058 00000000 		.word	Differentiator_apply
 488              		.cfi_endproc
 489              	.LFE169:
 491              		.section	.text.Reducer_new,"ax",%progbits
 492              		.align	1
 493              		.global	Reducer_new
 494              		.syntax unified
 495              		.thumb
 496              		.thumb_func
 498              	Reducer_new:
 499              	.LVL29:
 500              	.LFB171:
  63:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign member functions*/
 501              		.loc 1 63 1 is_stmt 1 view -0
 502              		.cfi_startproc
 503              		@ args = 0, pretend = 0, frame = 0
 504              		@ frame_needed = 0, uses_anonymous_args = 0
 505              		@ link register save eliminated.
  65:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 506              		.loc 1 65 5 view .LVU163
  65:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 507              		.loc 1 65 17 is_stmt 0 view .LVU164
 508 0000 044B     		ldr	r3, .L18
 509 0002 4361     		str	r3, [r0, #20]
  68:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[0] = 0.0F; self->reduced_angle[1] = 0.0F;
 510              		.loc 1 68 5 is_stmt 1 view .LVU165
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 13


  68:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[0] = 0.0F; self->reduced_angle[1] = 0.0F;
 511              		.loc 1 68 21 is_stmt 0 view .LVU166
 512 0004 80ED000A 		vstr.32	s0, [r0]
  69:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = 0.0F; self->reduced_angle[3] = 0.0F;
 513              		.loc 1 69 5 is_stmt 1 view .LVU167
  69:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = 0.0F; self->reduced_angle[3] = 0.0F;
 514              		.loc 1 69 28 is_stmt 0 view .LVU168
 515 0008 0023     		movs	r3, #0
 516 000a 4360     		str	r3, [r0, #4]	@ float
  69:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = 0.0F; self->reduced_angle[3] = 0.0F;
 517              		.loc 1 69 36 is_stmt 1 view .LVU169
  69:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->reduced_angle[2] = 0.0F; self->reduced_angle[3] = 0.0F;
 518              		.loc 1 69 59 is_stmt 0 view .LVU170
 519 000c 8360     		str	r3, [r0, #8]	@ float
  70:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 520              		.loc 1 70 5 is_stmt 1 view .LVU171
  70:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 521              		.loc 1 70 28 is_stmt 0 view .LVU172
 522 000e C360     		str	r3, [r0, #12]	@ float
  70:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 523              		.loc 1 70 36 is_stmt 1 view .LVU173
  70:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 524              		.loc 1 70 59 is_stmt 0 view .LVU174
 525 0010 0361     		str	r3, [r0, #16]	@ float
  71:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 526              		.loc 1 71 1 view .LVU175
 527 0012 7047     		bx	lr
 528              	.L19:
 529              		.align	2
 530              	.L18:
 531 0014 00000000 		.word	Reducer_apply
 532              		.cfi_endproc
 533              	.LFE171:
 535              		.section	.text.Dsp_new,"ax",%progbits
 536              		.align	1
 537              		.global	Dsp_new
 538              		.syntax unified
 539              		.thumb
 540              		.thumb_func
 542              	Dsp_new:
 543              	.LVL30:
 544              	.LFB176:
 127:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 128:Core/Src/Application/State_Estimator/Dsp/dsp.c **** void Dsp_new(struct Dsp * const self)
 129:Core/Src/Application/State_Estimator/Dsp/dsp.c **** {
 545              		.loc 1 129 1 is_stmt 1 view -0
 546              		.cfi_startproc
 547              		@ args = 0, pretend = 0, frame = 0
 548              		@ frame_needed = 0, uses_anonymous_args = 0
 549              		.loc 1 129 1 is_stmt 0 view .LVU177
 550 0000 38B5     		push	{r3, r4, r5, lr}
 551              	.LCFI6:
 552              		.cfi_def_cfa_offset 16
 553              		.cfi_offset 3, -16
 554              		.cfi_offset 4, -12
 555              		.cfi_offset 5, -8
 556              		.cfi_offset 14, -4
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 14


 557 0002 2DED028B 		vpush.64	{d8}
 558              	.LCFI7:
 559              		.cfi_def_cfa_offset 24
 560              		.cfi_offset 80, -24
 561              		.cfi_offset 81, -20
 562 0006 0446     		mov	r4, r0
 130:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Assign function pointer*/
 131:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->processNewData = &processNewData;
 563              		.loc 1 131 5 is_stmt 1 view .LVU178
 564              		.loc 1 131 26 is_stmt 0 view .LVU179
 565 0008 264B     		ldr	r3, .L22
 566 000a 4366     		str	r3, [r0, #100]
 132:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->cvtAngle = &cvtAngle;
 567              		.loc 1 132 5 is_stmt 1 view .LVU180
 568              		.loc 1 132 20 is_stmt 0 view .LVU181
 569 000c 264B     		ldr	r3, .L22+4
 570 000e 8366     		str	r3, [r0, #104]
 133:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimate = &estimate;
 571              		.loc 1 133 5 is_stmt 1 view .LVU182
 572              		.loc 1 133 20 is_stmt 0 view .LVU183
 573 0010 264B     		ldr	r3, .L22+8
 574 0012 0367     		str	r3, [r0, #112]
 134:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filter = &filter;
 575              		.loc 1 134 5 is_stmt 1 view .LVU184
 576              		.loc 1 134 18 is_stmt 0 view .LVU185
 577 0014 264B     		ldr	r3, .L22+12
 578 0016 C366     		str	r3, [r0, #108]
 135:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 136:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Define resolution for encoders*/
 137:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->motor_resol = 2.0F * (float32_t)PI / (4.0F * 500.0F);
 579              		.loc 1 137 5 is_stmt 1 view .LVU186
 580              		.loc 1 137 23 is_stmt 0 view .LVU187
 581 0018 264B     		ldr	r3, .L22+16
 582 001a 8360     		str	r3, [r0, #8]	@ float
 138:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->pendlm_resol = 2.0F * (float32_t)PI / (4.0F * 1000.0F);
 583              		.loc 1 138 5 is_stmt 1 view .LVU188
 584              		.loc 1 138 24 is_stmt 0 view .LVU189
 585 001c 264B     		ldr	r3, .L22+20
 586 001e C360     		str	r3, [r0, #12]	@ float
 139:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 140:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize value for data member*/
 141:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->motor_angle = 0.0F; self->pendlm_angle = 0.0F;
 587              		.loc 1 141 5 is_stmt 1 view .LVU190
 588              		.loc 1 141 23 is_stmt 0 view .LVU191
 589 0020 0025     		movs	r5, #0
 590 0022 8561     		str	r5, [r0, #24]	@ float
 591              		.loc 1 141 31 is_stmt 1 view .LVU192
 592              		.loc 1 141 50 is_stmt 0 view .LVU193
 593 0024 C561     		str	r5, [r0, #28]	@ float
 142:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->raw_motor_angle = 0.0F; self->raw_pendlm_angle = 0.0F;
 594              		.loc 1 142 5 is_stmt 1 view .LVU194
 595              		.loc 1 142 27 is_stmt 0 view .LVU195
 596 0026 0560     		str	r5, [r0]	@ float
 597              		.loc 1 142 35 is_stmt 1 view .LVU196
 598              		.loc 1 142 58 is_stmt 0 view .LVU197
 599 0028 4560     		str	r5, [r0, #4]	@ float
 143:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filtered_motor_angle = 0.0F; self->filtered_pendlm_angle = 0.0F;
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 15


 600              		.loc 1 143 5 is_stmt 1 view .LVU198
 601              		.loc 1 143 32 is_stmt 0 view .LVU199
 602 002a 0562     		str	r5, [r0, #32]	@ float
 603              		.loc 1 143 40 is_stmt 1 view .LVU200
 604              		.loc 1 143 68 is_stmt 0 view .LVU201
 605 002c 4562     		str	r5, [r0, #36]	@ float
 144:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->filtered_motor_vel = 0.0F; self->filtered_pendlm_vel = 0.0F;
 606              		.loc 1 144 5 is_stmt 1 view .LVU202
 607              		.loc 1 144 30 is_stmt 0 view .LVU203
 608 002e 8562     		str	r5, [r0, #40]	@ float
 609              		.loc 1 144 38 is_stmt 1 view .LVU204
 610              		.loc 1 144 64 is_stmt 0 view .LVU205
 611 0030 C562     		str	r5, [r0, #44]	@ float
 145:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 146:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize Reducers*/
 147:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->motor_reducer = ( struct Reducer * ) pvPortMalloc( sizeof( struct Reducer ) );
 612              		.loc 1 147 5 is_stmt 1 view .LVU206
 613              		.loc 1 147 48 is_stmt 0 view .LVU207
 614 0032 1820     		movs	r0, #24
 615              	.LVL31:
 616              		.loc 1 147 48 view .LVU208
 617 0034 FFF7FEFF 		bl	pvPortMalloc
 618              	.LVL32:
 619              		.loc 1 147 25 discriminator 1 view .LVU209
 620 0038 6065     		str	r0, [r4, #84]
 148:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->pendlm_reducer = ( struct Reducer * ) pvPortMalloc( sizeof( struct Reducer ) );
 621              		.loc 1 148 5 is_stmt 1 view .LVU210
 622              		.loc 1 148 49 is_stmt 0 view .LVU211
 623 003a 1820     		movs	r0, #24
 624 003c FFF7FEFF 		bl	pvPortMalloc
 625              	.LVL33:
 626              		.loc 1 148 26 discriminator 1 view .LVU212
 627 0040 A065     		str	r0, [r4, #88]
 149:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     Reducer_new(self->motor_reducer, 30.0F); 
 628              		.loc 1 149 5 is_stmt 1 view .LVU213
 629 0042 B3EE0E0A 		vmov.f32	s0, #3.0e+1
 630 0046 606D     		ldr	r0, [r4, #84]
 631 0048 FFF7FEFF 		bl	Reducer_new
 632              	.LVL34:
 150:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     Reducer_new(self->pendlm_reducer, 0.5F);
 633              		.loc 1 150 5 view .LVU214
 634 004c B6EE000A 		vmov.f32	s0, #5.0e-1
 635 0050 A06D     		ldr	r0, [r4, #88]
 636 0052 FFF7FEFF 		bl	Reducer_new
 637              	.LVL35:
 151:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 152:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize Differentiators*/
 153:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->motor_differentiator = ( Differentiator * ) pvPortMalloc( sizeof(Differentiator) );
 638              		.loc 1 153 5 view .LVU215
 639              		.loc 1 153 55 is_stmt 0 view .LVU216
 640 0056 2C20     		movs	r0, #44
 641 0058 FFF7FEFF 		bl	pvPortMalloc
 642              	.LVL36:
 643              		.loc 1 153 32 discriminator 1 view .LVU217
 644 005c E065     		str	r0, [r4, #92]
 154:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->pendlm_differentiator = ( Differentiator * ) pvPortMalloc( sizeof(Differentiator) );
 645              		.loc 1 154 5 is_stmt 1 view .LVU218
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 16


 646              		.loc 1 154 56 is_stmt 0 view .LVU219
 647 005e 2C20     		movs	r0, #44
 648 0060 FFF7FEFF 		bl	pvPortMalloc
 649              	.LVL37:
 650              		.loc 1 154 33 discriminator 1 view .LVU220
 651 0064 2066     		str	r0, [r4, #96]
 155:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     Differentiator_new(self->motor_differentiator, 1E-3F, MOTOR_FILTER_STAGES_NUM, &motor_butterwor
 652              		.loc 1 155 5 is_stmt 1 view .LVU221
 653 0066 9FED158A 		vldr.32	s16, .L22+24
 654 006a 154A     		ldr	r2, .L22+28
 655 006c 0121     		movs	r1, #1
 656 006e B0EE480A 		vmov.f32	s0, s16
 657 0072 E06D     		ldr	r0, [r4, #92]
 658 0074 FFF7FEFF 		bl	Differentiator_new
 659              	.LVL38:
 156:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     Differentiator_new(self->pendlm_differentiator, 1E-3F, PENDULM_FILTER_STAGES_NUM, &pendlm_butte
 660              		.loc 1 156 5 view .LVU222
 661 0078 124A     		ldr	r2, .L22+32
 662 007a 0121     		movs	r1, #1
 663 007c B0EE480A 		vmov.f32	s0, s16
 664 0080 206E     		ldr	r0, [r4, #96]
 665 0082 FFF7FEFF 		bl	Differentiator_new
 666              	.LVL39:
 157:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 158:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize estimated data output*/
 159:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_motor_data.angle = 0.0F;
 667              		.loc 1 159 5 view .LVU223
 668              		.loc 1 159 38 is_stmt 0 view .LVU224
 669 0086 2563     		str	r5, [r4, #48]	@ float
 160:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_motor_data.vel = 0.0F;
 670              		.loc 1 160 5 is_stmt 1 view .LVU225
 671              		.loc 1 160 36 is_stmt 0 view .LVU226
 672 0088 6563     		str	r5, [r4, #52]	@ float
 161:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_motor_data.acc = 0.0F;
 673              		.loc 1 161 5 is_stmt 1 view .LVU227
 674              		.loc 1 161 36 is_stmt 0 view .LVU228
 675 008a A563     		str	r5, [r4, #56]	@ float
 162:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_pendlm_data.angle = 0.0F;
 676              		.loc 1 162 5 is_stmt 1 view .LVU229
 677              		.loc 1 162 39 is_stmt 0 view .LVU230
 678 008c E563     		str	r5, [r4, #60]	@ float
 163:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_pendlm_data.vel = 0.0F;
 679              		.loc 1 163 5 is_stmt 1 view .LVU231
 680              		.loc 1 163 37 is_stmt 0 view .LVU232
 681 008e 2564     		str	r5, [r4, #64]	@ float
 164:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_pendlm_data.acc = 0.0F;
 682              		.loc 1 164 5 is_stmt 1 view .LVU233
 683              		.loc 1 164 37 is_stmt 0 view .LVU234
 684 0090 6564     		str	r5, [r4, #68]	@ float
 165:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_cart_data.angle = 0.0F; // angle = x 
 685              		.loc 1 165 5 is_stmt 1 view .LVU235
 686              		.loc 1 165 37 is_stmt 0 view .LVU236
 687 0092 A564     		str	r5, [r4, #72]	@ float
 166:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->estimated_cart_data.vel = 0.0F;
 688              		.loc 1 166 5 is_stmt 1 view .LVU237
 689              		.loc 1 166 35 is_stmt 0 view .LVU238
 690 0094 E564     		str	r5, [r4, #76]	@ float
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 17


 167:Core/Src/Application/State_Estimator/Dsp/dsp.c **** 
 168:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /**/
 169:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     /*Initialize gear ratio value
 170:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     * The assigned value: 
 171:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     *    self->gear_ratio = gear_ratio * motor_gear_radius
 172:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     */
 173:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->gear_ratio = ( 1.0F / 14.0F ) * 0.011F;
 691              		.loc 1 173 5 is_stmt 1 view .LVU239
 692              		.loc 1 173 22 is_stmt 0 view .LVU240
 693 0096 0C4B     		ldr	r3, .L22+36
 694 0098 2361     		str	r3, [r4, #16]	@ float
 174:Core/Src/Application/State_Estimator/Dsp/dsp.c ****     self->previous_x = 0.0F;
 695              		.loc 1 174 5 is_stmt 1 view .LVU241
 696              		.loc 1 174 22 is_stmt 0 view .LVU242
 697 009a 6561     		str	r5, [r4, #20]	@ float
 175:Core/Src/Application/State_Estimator/Dsp/dsp.c **** }
 698              		.loc 1 175 1 view .LVU243
 699 009c BDEC028B 		vldm	sp!, {d8}
 700              	.LCFI8:
 701              		.cfi_restore 80
 702              		.cfi_restore 81
 703              		.cfi_def_cfa_offset 16
 704 00a0 38BD     		pop	{r3, r4, r5, pc}
 705              	.LVL40:
 706              	.L23:
 707              		.loc 1 175 1 view .LVU244
 708 00a2 00BF     		.align	2
 709              	.L22:
 710 00a4 00000000 		.word	processNewData
 711 00a8 00000000 		.word	cvtAngle
 712 00ac 00000000 		.word	estimate
 713 00b0 00000000 		.word	filter
 714 00b4 2EE34D3B 		.word	994960174
 715 00b8 2EE3CD3A 		.word	986571566
 716 00bc 6F12833A 		.word	981668463
 717 00c0 00000000 		.word	motor_butterworth_coeffs
 718 00c4 00000000 		.word	pendlm_butterworth_coeffs
 719 00c8 65F84D3A 		.word	978188389
 720              		.cfi_endproc
 721              	.LFE176:
 723              		.text
 724              	.Letext0:
 725              		.file 2 "D:/Software/Arm Toolchain/arm-gnu-toolchain-13.2.rel1-mingw-w64-i686-arm-none-eabi/arm-gn
 726              		.file 3 "D:/Software/Arm Toolchain/arm-gnu-toolchain-13.2.rel1-mingw-w64-i686-arm-none-eabi/arm-gn
 727              		.file 4 "D:/Software/Arm Toolchain/arm-gnu-toolchain-13.2.rel1-mingw-w64-i686-arm-none-eabi/arm-gn
 728              		.file 5 "Drivers/CMSIS/DSP/Include/arm_math.h"
 729              		.file 6 "Core/Src/Middleware/Topic/topic.h"
 730              		.file 7 "Core/Src/Application/State_Estimator/Dsp/dsp.h"
 731              		.file 8 "ThirdParty/FreeRTOS/include/portable.h"
ARM GAS  C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 dsp.c
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:21     .text.Reducer_apply:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:26     .text.Reducer_apply:00000000 Reducer_apply
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:101    .text.cvtAngle:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:106    .text.cvtAngle:00000000 cvtAngle
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:140    .text.filter:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:145    .text.filter:00000000 filter
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:197    .text.estimate:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:202    .text.estimate:00000000 estimate
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:248    .text.processNewData:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:253    .text.processNewData:00000000 processNewData
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:318    .text.Differentiator_apply:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:323    .text.Differentiator_apply:00000000 Differentiator_apply
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:404    .text.Differentiator_new:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:410    .text.Differentiator_new:00000000 Differentiator_new
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:487    .text.Differentiator_new:00000058 $d
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:492    .text.Reducer_new:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:498    .text.Reducer_new:00000000 Reducer_new
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:531    .text.Reducer_new:00000014 $d
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:536    .text.Dsp_new:00000000 $t
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:542    .text.Dsp_new:00000000 Dsp_new
C:\Users\ACER\AppData\Local\Temp\ccPlPKxi.s:710    .text.Dsp_new:000000a4 $d

UNDEFINED SYMBOLS
arm_biquad_cascade_df2T_f32
pvPortMalloc
arm_biquad_cascade_df2T_init_f32
motor_butterworth_coeffs
pendlm_butterworth_coeffs
